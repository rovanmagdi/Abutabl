import{V as b,W as j,X as v,Y as k,u as R,d as S,b as y,r as l,j as e,C as N}from"./index-c924bf14.js";import{a as w,F as C}from"./index.esm-7946a255.js";import{I,F}from"./form-validations-0d55b678.js";import{L}from"./styles-583c411e.js";import{F as V}from"./Flex-2ae25098.js";import"./Input-bcdb6461.js";import"./pack-sx-3cdbfbd6.js";const p=b("CodeVerfication",async s=>{var a,i;try{const t=await j("verification_code",s);return console.log(t),t.status=="passwords.sent",t.status=="passwords.throttled",t}catch(t){v.error((i=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:i.msg)}}),u={user:null},f=k({name:"CodeVerfication",initialState:u,reducers:{resetResponse(s=u){s.user=null}},extraReducers:s=>{s.addCase(p.fulfilled,(a,i)=>{a.user=i.payload,console.log(i)})}});f.actions;f.reducer;function M(){const{formatMessage:s}=R(),a=w(),{handleSubmit:i}=a,t=S(),x=y(),[r,c]=l.useState(60),[d,m]=l.useState(!0);l.useEffect(()=>{const n=setInterval(()=>{r>0?c(o=>o-1):(m(!1),clearInterval(n))},1e3);return()=>{clearInterval(n)}},[r]);const h=()=>{m(!0),c(60)},g=async n=>{const o=await x(p(n));console.log(o,"kkkkkkkkkk"),o.payload!=null&&(localStorage.setItem("verfication-code",n),t("/reset-password"))};return e.jsx(L,{children:e.jsx("div",{className:"w-full flex flex-col gap-6",children:e.jsx(C,{...a,children:e.jsxs("form",{onSubmit:i(g),children:[e.jsxs(V,{direction:"column",gap:8,className:"wellcome_wrapper",children:[e.jsx("h1",{children:s({id:"Verification"})}),e.jsxs("p",{className:"text-Grey-body text-sm font-bold",children:[s({id:"Please-verify"})," ahmed@gmail.com"," "]})]}),e.jsx(I,{name:"verification_code",label:"OTP",placeholder:"OTP",registerOptions:{required:{value:!0,message:"requiredField"},pattern:{value:F.otpNumber,message:s({id:"verification_code"})}}}),e.jsxs("p",{className:"text-Morning-Blue text-sm font-normal",children:[s({id:"Time-remaining"})," ",e.jsxs("span",{className:"font-medium text-EerieBlack px-2",children:["00:",r<10?`0${r}`:r]})," "]}),e.jsx(N,{type:"submit",className:"bg-LightSeaGreen hover:bg-LightSeaGreen rounded-2xl shadow-custom-sm-green",px:32,py:16,size:"xl",children:e.jsx("span",{className:"text-Lotion font-medium",children:s({id:"Continue"})})}),e.jsxs("p",{className:"text-Morning-Blue text-sm font-normal",children:[s({id:"Didnt-get-code"})," ",e.jsx("button",{disabled:d,className:`font-medium ${d?"text-LightSeaGreenDisabled":"text-LightSeaGreen"} px-2`,onClick:h,children:s({id:"Resend-code"})})," "]})]})})})})}export{M as default};
